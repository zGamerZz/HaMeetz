(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{73175:function(e,t,s){Promise.resolve().then(s.bind(s,59432))},59432:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(57437),r=s(2265),l=s(87770),n=s(30718),d=s(99376),i=s(15001),o=s(68172),c=s(27648),f=s(33145),u=s(62869),x=s(94508);let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...r})});m.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,x.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,x.cn)("text-sm text-slate-500 dark:text-slate-400",s),...r})}).displayName="CardDescription";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("p-6 pt-0",s),...r})});h.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,x.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var p=e=>{let{title:t,iconUrl:s}=e;return(0,a.jsx)("section",{className:"flex-center h-screen w-full",children:(0,a.jsx)(m,{className:"w-full max-w-[520px] border-none bg-dark-1 p-6 py-9 text-white",children:(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3.5",children:[s&&(0,a.jsx)("div",{className:"flex-center",children:(0,a.jsx)(f.default,{src:s,width:72,height:72,alt:"icon"})}),(0,a.jsx)("p",{className:"text-center text-xl font-semibold",children:t})]}),(0,a.jsx)(u.z,{asChild:!0,className:"bg-blue-1",children:(0,a.jsx)(c.default,{href:"/",children:"Back to Home"})})]})})})})},b=e=>{let{setIsSetupComplete:t}=e,{useCallEndedAt:s,useCallStartsAt:l}=(0,n.dvl)(),d=l(),i=s(),o=d&&new Date(d)>new Date,c=(0,n.W7t)();if(!c)throw Error("useStreamCall must be used within a StreamCall component.");let[f,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{f?(c.camera.disable(),c.microphone.disable()):(c.camera.enable(),c.microphone.enable())},[f,c.camera,c.microphone]),o)?(0,a.jsx)(p,{title:"Your Meeting has not started yet. It is scheduled for ".concat(d.toLocaleString())}):i?(0,a.jsx)(p,{title:"The call has been ended by the host",iconUrl:"/icons/call-ended.svg"}):(0,a.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-3 text-white",children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-bold",children:"Setup"}),(0,a.jsx)(n.FoN,{}),(0,a.jsxs)("div",{className:"flex h-16 items-center justify-center gap-3",children:[(0,a.jsxs)("label",{className:"flex items-center justify-center gap-2 font-medium",children:[(0,a.jsx)("input",{type:"checkbox",checked:f,onChange:e=>x(e.target.checked)}),"Join with mic and camera off"]}),(0,a.jsx)(n.Avh,{})]}),(0,a.jsx)(u.z,{className:"rounded-md bg-green-500 px-4 py-2.5",onClick:()=>{c.join(),t(!0)},children:"Join meeting"})]})},g=s(7600),j=s(95805),N=s(17032),v=s(10407),k=s(30401),w=s(40519);let y=N.fC,C=N.xz;N.ZA,N.Uv,N.Tr,N.Ee,r.forwardRef((e,t)=>{let{className:s,inset:r,children:l,...n}=e;return(0,a.jsxs)(N.fF,{ref:t,className:(0,x.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-100 data-[state=open]:bg-slate-100 dark:focus:bg-slate-800 dark:data-[state=open]:bg-slate-800",r&&"pl-8",s),...n,children:[l,(0,a.jsx)(v.Z,{className:"ml-auto size-4"})]})}).displayName=N.fF.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(N.tu,{ref:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...r})}).displayName=N.tu.displayName;let z=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(N.Uv,{children:(0,a.jsx)(N.VY,{ref:t,sideOffset:r,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...l})})});z.displayName=N.VY.displayName;let R=r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(N.ck,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",r&&"pl-8",s),...l})});R.displayName=N.ck.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:l,...n}=e;return(0,a.jsxs)(N.oC,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",s),checked:l,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(N.wU,{children:(0,a.jsx)(k.Z,{className:"size-4"})})}),r]})}).displayName=N.oC.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(N.Rk,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(N.wU,{children:(0,a.jsx)(w.Z,{className:"size-2 fill-current"})})}),r]})}).displayName=N.Rk.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(N.__,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})}).displayName=N.__.displayName;let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(N.Z0,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-[#232d37] dark:bg-slate-800",s),...r})});S.displayName=N.Z0.displayName;var Z=s(57212),_=()=>{let e=(0,n.W7t)(),t=(0,d.useRouter)();if(!e)throw Error("useStreamCall must be used within a StreamCall component.");let{useLocalParticipant:s}=(0,n.dvl)(),r=s();if(!(r&&e.state.createdBy&&r.userId===e.state.createdBy.id))return null;let l=async()=>{await e.endCall(),t.push("/")};return(0,a.jsx)(u.z,{onClick:l,className:"bg-red-500",children:"End call for everyone"})},E=()=>{let e=!!(0,d.useSearchParams)().get("personal"),t=(0,d.useRouter)(),[s,l]=(0,r.useState)("speaker-left"),[i,o]=(0,r.useState)(!1),{useCallCallingState:c}=(0,n.dvl)();return c()!==n.Uq0.JOINED?(0,a.jsx)(Z.Z,{}):(0,a.jsxs)("section",{className:"relative h-screen w-full overflow-hidden pt-4 text-white",children:[(0,a.jsxs)("div",{className:"relative flex size-full items-center justify-center",children:[(0,a.jsx)("div",{className:" flex size-full max-w-[1000px] items-center",children:(0,a.jsx)(()=>{switch(s){case"grid":return(0,a.jsx)(n.ZXw,{});case"speaker-right":return(0,a.jsx)(n.gy1,{participantsBarPosition:"left"});default:return(0,a.jsx)(n.gy1,{participantsBarPosition:"right"})}},{})}),(0,a.jsx)("div",{className:(0,x.cn)("h-[calc(100vh-86px)] hidden ml-2",{"show-block":i}),children:(0,a.jsx)(n.lkp,{onClose:()=>o(!1)})})]}),(0,a.jsxs)("div",{className:"fixed bottom-0 flex w-full items-center justify-center gap-5",children:[(0,a.jsx)(n.PHQ,{onLeave:()=>t.push("/")}),(0,a.jsxs)(y,{children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(C,{className:"cursor-pointer rounded-2xl bg-[#19232d] px-4 py-2 hover:bg-[#4c535b]  ",children:(0,a.jsx)(g.Z,{size:20,className:"text-white"})})}),(0,a.jsx)(z,{className:"border-dark-1 bg-dark-1 text-white",children:["Grid","Speaker-Left","Speaker-Right"].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(R,{onClick:()=>l(e.toLowerCase()),children:e}),(0,a.jsx)(S,{className:"border-dark-1"})]},t))})]}),(0,a.jsx)(n.GUv,{}),(0,a.jsx)("button",{onClick:()=>o(e=>!e),children:(0,a.jsx)("div",{className:" cursor-pointer rounded-2xl bg-[#19232d] px-4 py-2 hover:bg-[#4c535b]  ",children:(0,a.jsx)(j.Z,{size:20,className:"text-white"})})}),!e&&(0,a.jsx)(_,{})]})]})},U=()=>{let{id:e}=(0,d.useParams)(),{isLoaded:t,user:s}=(0,l.aF)(),{call:c,isCallLoading:f}=(0,o.J)(e),[u,x]=(0,r.useState)(!1);return!t||f?(0,a.jsx)(i.Z,{}):c?"invited"!==c.type||s&&c.state.members.find(e=>e.user.id===s.id)?(0,a.jsx)("main",{className:"h-screen w-full",children:(0,a.jsx)(n.N_D,{call:c,children:(0,a.jsx)(n.c3T,{children:u?(0,a.jsx)(E,{}):(0,a.jsx)(b,{setIsSetupComplete:x})})})}):(0,a.jsx)(p,{title:"You are not allowed to join this meeting"}):(0,a.jsx)("p",{className:"text-center text-3xl font-bold text-white",children:"Call Not Found"})}},57212:function(e,t,s){"use strict";var a=s(57437),r=s(33145);t.Z=()=>(0,a.jsx)("div",{className:"flex-center h-screen w-full",children:(0,a.jsx)(r.default,{src:"/icons/loading-circle.svg",alt:"Loading...",width:50,height:50})})},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(57437),r=s(2265),l=s(37053),n=s(77712),d=s(94508);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-800/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:o=!1,...c}=e,f=o?l.g7:"button";return(0,a.jsx)(f,{className:(0,d.cn)(i({variant:r,size:n,className:s})),ref:t,...c})});o.displayName="Button"},68172:function(e,t,s){"use strict";s.d(t,{J:function(){return l}});var a=s(2265),r=s(30718);let l=e=>{let[t,s]=(0,a.useState)(),[l,n]=(0,a.useState)(!0),d=(0,r.b12)();return(0,a.useEffect)(()=>{d&&(async()=>{try{let{calls:t}=await d.queryCalls({filter_conditions:{id:e}});t.length>0&&s(t[0]),n(!1)}catch(e){console.error(e),n(!1)}})()},[d,e]),{call:t,isCallLoading:l}}},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(61994),r=s(53335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[463,674,770,628,639,145,451,423,648,530,971,117,744],function(){return e(e.s=73175)}),_N_E=e.O()}]);